-Алгоритм  

вообще, задача на минимальную сумму растояний от одного ученика до остальных

Месье Бэзликов, [8/20/2022 11:45 AM]
[In reply to Timur]
предлагаю решение с помощью матана: нужно минимизирвоать функцию y=|x-a| + |x-b| + |x-c| + |x-d| + |x-e|== min —> y' = 0 

Вспомним, что (|x|)' = sgn(x) —> 
если в функции y 2n слагаемых, то просто надо n слагаемых сделать "-1", а оставшиеся слагаемые сделать (n штук) "+1"

если в функции y 2n+1 слагаемых, то просто надо n слагаемых сделать "-1", n слагаемые сделать "+1", а одно занулить.

n — натуральное число

Так как иные варинаты невозможны, то мы рассмотрели все случаи. Осталось только заметить, что ввиду определения sgn(x) описанные выше случаи можно гарантировать в точке n/2



Решение не очень аккуратное, но его можно самому причесать  и все будет норм

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
там надо поставить школу в точку, чтобы суммарное расстояние до всех домов было минимальным?

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
ну типа локальный оптимум для одного ученика не обязательно даст оптимум глобальный

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
тут надо подойти с такой стороны

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
пусть школа расположена на отрезке между домами i и i + 1

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
включая сами дома

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
пусть её координата равна S = x[i] + d

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
теперь давайте запишем общую сумму расстояний

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
Sum = (S - x[1]) + (S - x[2]) + ... + (S - x[i]) + (x[i + 1] - S) + ... + (x[n] - S)

раскроем скобки и преобразуем:
S * i - (x[1] + x[2] + ... + x[i]) + (x[i + 1] + x[i + 2] + .. + x[n]) - S * (n - i) = S * (2 * i - n) - sum(x[1]..x[i]) + sum(x[i + 1]..x[n])

Обозначим sum(x[1]..x[i]) за Pref[i], sum(x[i + 1]..x[n]) за Suff[i + 1]

Так же вспомним, что S = x[i] + d

подставим:
Sum = (x[i] + d) * (2 * i - n) - Pref[i] + Suff[i + 1]
Sum = d * (2 * i - n) + x[i] * (2 * i - n) - Pref[i] + Suff[i + 1]

Заметим, что часть F(i) = x[i] * (2 * i - n) - Pref[i] + Suff[i + 1] не зависит от величины d совсем 

Получаем
Sum(i, d) = d * (2 * i - n) + F(i)

Видно, что при фиксированном i функция является линейной относительно параметра d

Раз функция линейная, то её экстремум находится на одном из краёв отрезка - слева или справа. 
Где именно - зависит от знака прямой.

Уточню, что в данной задаче нас интересует минимум.

Очевидно, что если 2 * i - n < 0 - функция строго убывает и минимум находится при максимальном d = x[i + 1] - x[i] - то есть на правой границе отрезка в доме i + 1.
Если 2 * i - n > 0 - функция строго возрастает и минимум находится при минимальном d = 0 - то есть на левой границе отрезка в доме x[i]
Если 2 * i - n = 0 - то функция на этом отрезке никак не зависит от d - то есть школу можно ставить в любой точке между домами, включая их самих.

Отсюда следует, что в любом случае школу можно поставить в один из домов и не потерять оптимального решения

Slava Muravjev, [8/20/2022 11:46 AM]
[Forwarded from Slava Muravjev]
Теперь о том, почему выгодно ставить именно в медиану массива домов:

Сравним sum(i, 0) и sum(i + 1, 0):

(x[i] + 0) * (2 * i - n) - Pref[i] + suff[i + 1] ? (x[i + 1] + 0) * (2 * (i + 1) - n) - Pref[i + 1] + Suff[i + 2]

Запишем дополнительные связи

Pref[i + 1] = Pref[i] + x[i + 1]
Suff[i + 1] = Suff[i + 2] + x[i + 1]

Раскроем скобки и сократим одинаковые части

Слева:
x[i] * (2 * i - n) - Pref[i] + Suff[i + 2] + x[i + 1]

Справа:
x[i + 1] * (2 * i - n) + 2 * x[i + 1] - Pref[i] - x[i + 1] + Suff[i + 2] = x[i + 1] * (2 * i - n) + x[i + 1] - Pref[i] + Suff[i + 2]

Сокращаем одинаковые части
x[i] * (2 * i - n) ? x[i + 1] * (2 * i - n)

Перенесем все в правую сторону

0 ? (2 * i - n) * (x[i + 1] - x[i])

Обратим внимание, что x[i] <= x[i + 1] по условию (мы рассматриваем дома в порядке возрастания координат)

значит x[i + 1] - x[i] >= 0 всегда - откуда следует, что знак в неравенстве

0 ? (x[i + 1] - x[i]) * (2 * i - n)

равен знаку неравенства

0 ? 2 * i - n

Откуда следует, что сначала sum(i, 0) > sum(i + 1, 0), затем в какой-то момент они могут стать равны (когда 2 * i - n = 0), потом sum(i, 0) < sum(i + 1, 0)

Отсюда следует, что оптимум достигается при |2 * i - n| максимально близком к 0

N целое, значит существует всего два варианта:
1) n % 2 == 0 -> существует такой i, что 2 * i - n = 0 -> значит на всем отрезке между i и i + 1 будет одинаковый глобальный минимум

Здесь i = n // 2

2) n % 2 == 1 -> существует такой i, что 2 * i - n == -1, 2 * (i + 1) - n == +1

Откуда следует, что до i + 1-го всё уменьшается, после него - всё увеличивается:

здесь i + 1 = (n + 1) // 2

Как видно, во всех случаях мы приходим к оптимум в медианном доме (даже если есть несколько домов с одинаковыми координатами)


для кучи: [Точки A, В, С и D лежат на одной прямой. Пусть, например, точки С и D лежат между A и В; тогда искомой точкой будет любая точка M отрезка CD (для любой такой точки M сумма AM + BM + CM + DM равна AB + CD; для точки M, не лежащей на отрезке CD, эта сумма, как легко видеть, больше).](https://www.problems.ru/view_problem_details_new.php?id=78221) — далее, опять же, можно своими ручками легко обобщить
